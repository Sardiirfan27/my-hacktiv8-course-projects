<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Create Your Own JavaScript App</title>
  </head>
  <body>
    <h1>Create Your Own JavaScript App</h1>
    <h4>Detail Tugas : <a href="https://github.com/hacktiv8/phase-0-activities/blob/master/modules/js-application.md">Create Your Own JavaScript App</a></h4>

    <h2>Geek To do list <b>CLI</b> (Command Line Interface)</h2>
    <p>
      Ini adalah aplikasi to-do list sederhana untuk para JS Geek, karena tidak menggunakan interface GUI melainkan hanya via (GUI) Command Line Interface.

    </p>
    Untuk menggunakanya, lihat Developer Tool / CRTL + SHIFT + I
    <p>
      Aplikasi ini memiliki fungsi-fungsi dasar selayaknya aplikasi todo list biasanya, yaiyu :
      <ul>
        <li>Melihat daftar todo</li>
        <ul>
          <li>Yang sudah selesai</li>
          <li>Yang belum selesai</li>
        </ul>
        <li>Menambah todo</li>
        <li>Menghapus todo</li>
        <li>Mengubah status todo</li>
        <li>Menampilkan instruksi penggunaan aplikasi</li>
      </ul>
    </p>

    <p>
      <h5>Pseudocode : </h5>
      
    </p>
    <p>
      <h5>Di balik layar</h5>
      Saya menganggap setiap todo adalah object, todo list adalah Array yang berisi kumpulan dari object todo.
      Mengunakan penyimpanan (mirip Database) bawaan HTML5 yaitu localStorage guna menyimpan todo list.
    </p>
    <br>

    <script>

    function add (task) {
      var todos = get_todos();
      todos.push({
        taskName : task,
        status : 'belum-selesai'
      });
      localStorage.setItem('todo', JSON.stringify(todos));
      show();
    }

    function get_todos () {
      var todos = new Array;
      var todos_str = localStorage.getItem('todo');
      if (todos_str != null) {
        todos = JSON.parse(todos_str);
      }
      return todos;
    }

    function show() {
      var todos = get_todos();
      if (todos.length === 0) {
        console.log('Todo list Anda kosong');
        console.log('Tambah todo list dengan perintah : add("nama task");');
      } else {
        var results = '';
        // Task list on progress
        for(var i=0; i < todos.length; i++) {
          console.log('Un-finished task : ');
          if (todos[i].status !== 'selesai') {
            console.log(i + ' - ' + todos[i].taskName);
          }
        };
        // Task finished
        for(var i=0; i < todos.length; i++) {
          console.log('Finished task : ');
          if (todos[i].status === 'selesai') {
            console.log(i + ' - ' + todos[i].taskName);
          }
        };
      }


    }
    //
    function remove(id) {
      var todos = get_todos();
      var deletedTodo = todos[id];
      todos.splice(id, 1);
      localStorage.setItem('todo', JSON.stringify(todos));

      show();

      return 'sukses menghapus ' + deletedTodo.taskName;
    }

    function changeStatus (id) {
      var todos = get_todos();
      var updatedTodo = todos[id];
      console.log(todos);
      console.log(updatedTodo);
      if (updatedTodo.status === 'selesai') {
        updatedTodo.status = 'belum-selesai';
      } else {
        updatedTodo.status = 'selesai';
      }
      todos.splice(id, 1, updatedTodo);
      console.log(updatedTodo);
      console.log(todos);
    }

    function instruction () {
      console.log('Instruction : ');
      console.log('Untuk menambah task, panggil perintah : add("nama task");');
      console.log('Untuk melihat task, panggil perintah : show();');
      console.log('Untuk menghapus task, panggil perintah : remove(indexTask);');
      console.log('Untuk mengubah status task, panggil perintah : changeStatus  (indexTask);');
      console.log('Untuk membuka instruksi ini, panggil perintah : instruction();');
    }

    console.log('Selamat datang di aplikasi todo list khusus untuk JS Geek.');
    console.log('----------------------------------------------------------');
    instruction();
    </script>
  </body>
</html>
